# Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.

# typed: true
# frozen_string_literal: true

require 'faraday'
require 'faraday/multipart'
require 'sorbet-runtime'

module OpenApiSDK
  extend T::Sig


  SERVER_PROD = 'prod'# The production server.
  SERVER_STAGING = 'staging'# The staging server.
  SERVER_CUSTOMER = 'customer'# A per-organization and per-environment API.
  SERVERS = {
    SERVER_PROD: 'https://speakeasy.bar',
    SERVER_STAGING: 'https://staging.speakeasy.bar',
    SERVER_CUSTOMER: 'https://{organization}.{environment}.speakeasy.bar',
  }.freeze
  # Contains the list of servers available to the SDK

  # ServerEnvironment - The environment name. Defaults to the production environment.
  class ServerEnvironment < T::Enum
    enums do
      PROD = new('prod')
      STAGING = new('staging')
      DEV = new('dev')
    end
  end


  class SDKConfiguration < OpenApiSDK::Utils::FieldAugmented
    extend T::Sig

    field :client, T.nilable(Faraday::Connection)
    field :security, Shared::Security
    field :server_url, T.nilable(String)
    field :server, T.nilable(String)
    field :server_defaults, Hash[Symbol, Hash[Symbol, String]], { 'default_factory': Hash}
    field :language, String
    field :openapi_doc_version, String
    field :sdk_version, String
    field :gen_version, String
    field :user_agent, String
  
    
    sig { params(client: Faraday::Connection, security: T.nilable(Shared::Security), server_url: T.nilable(String), server_idx: T.nilable(Integer), server_defaults: T::Hash[Symbol, String], globals: T::Hash[Symbol, T::Hash[Symbol, T::Hash[Symbol, Object]]]).void }
    def initialize(client, security, server_url, server_idx, server_defaults, globals)
      @client = client
      @server = server_url.nil? ? '' : server_url
      @server_defaults = server_defaults.nil? ? {} : server_defaults
      @language = 'ruby'
      @openapi_doc_version = '1.0.0'
      @sdk_version = '0.1.0'
      @gen_version = '2.146.2'
      @user_agent = 'speakeasy-sdk/ruby 0.1.0 2.146.2 1.0.0 openapi'
    end

    sig { returns([String, T::Hash[Symbol, String]]) }
    def get_server_details
      return [@server_url.delete_suffix('/'), {}] if !@server_url.nil?
      @server = SERVER_PROD if @server.nil?

      [SERVERS[@server], @server_defaults.get(@server, {})]
    end
  end
end
